!function(){"use strict";class e{equals(t){if(!t||t.termType!==this.termType)return!1;for(const[r,i]of Object.entries(this)){const n=t[r];if(i instanceof e){if(!i.equals(n))return!1}else if(n!==i)return!1}return!0}}class t extends e{__init(){this.termType="NamedNode"}constructor(e){super(),this.value=e,t.prototype.__init.call(this),Object.freeze(this)}}class r extends e{static __initStatic(){this.nextId=0}__init2(){this.termType="BlankNode"}constructor(e){super(),r.prototype.__init2.call(this),this.value=e||"b"+ ++r.nextId,Object.freeze(this)}}r.__initStatic();class i extends e{static __initStatic2(){this.langStringDatatype=new t("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString")}static __initStatic3(){this.stringDatatype=new t("http://www.w3.org/2001/XMLSchema#string")}__init3(){this.termType="Literal"}constructor(e,r){super(),this.value=e,i.prototype.__init3.call(this),"string"==typeof r?-1===r.indexOf(":")?(this.language=r,this.datatype=i.langStringDatatype):(this.language="",this.datatype=new t(r)):(this.language="",this.datatype=r||i.stringDatatype),Object.freeze(this)}}i.__initStatic2(),i.__initStatic3();class n extends e{__init4(){this.termType="Variable"}constructor(e){super(),this.value=e,n.prototype.__init4.call(this),Object.freeze(this)}}class s extends e{static __initStatic4(){this.instance=new s}constructor(){super(),s.prototype.__init5.call(this),s.prototype.__init6.call(this),Object.freeze(this)}__init5(){this.termType="DefaultGraph"}__init6(){this.value=""}}s.__initStatic4();class o{constructor(e,t,r,i){this.subject=e,this.predicate=t,this.object=r,this.graph=i,Object.freeze(this)}equals(e){return!!e&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}const c={subject:[t.prototype,r.prototype,n.prototype],predicate:[t.prototype,n.prototype],object:[t.prototype,i.prototype,r.prototype,n.prototype],graph:[s.prototype,t.prototype,r.prototype,n.prototype]};const a=new class{constructor(e){this.strict=e,Object.freeze(this)}blankNode(e){if(this.strict&&void 0!==e&&"string"!=typeof e)throw new Error("Expected string or undefined");return new r(e)}defaultGraph(){return s.instance}literal(e,r){if(this.strict){if("string"!=typeof e)throw new Error("Expected string as value");if(void 0!==r&&"string"!=typeof r&&Object.getPrototypeOf(r)!==t.prototype)throw new Error("Expected undefined, string or NamedNode prototype as language/datatype")}return new i(e,r)}namedNode(e){if(this.strict&&"string"!=typeof e)throw new Error("Expected string");return new t(e)}quad(e,t,r,i){if(this.strict){if(!c.subject.includes(Object.getPrototypeOf(e)))throw new Error("Invalid prototype of subject");if(!c.predicate.includes(Object.getPrototypeOf(t)))throw new Error("Invalid prototype of predicate");if(!c.object.includes(Object.getPrototypeOf(r)))throw new Error("Invalid prototype of object");if(void 0!==i&&!c.graph.includes(Object.getPrototypeOf(i)))throw new Error("Invalid prototype of graph")}return new o(e,t,r,i||this.defaultGraph())}variable(e){if(this.strict&&"string"!=typeof e)throw new Error("Expected string");return new n(e)}}(!1);function d(e){return function e(t,r){return new Proxy(new Function,{apply(e,i,n){if(!Array.isArray(n)||0!==n.length)throw new Error("Argument list must be empty");return t(r)},get(i,n){if("string"!=typeof n)throw new Error(`Property ${String(n)} is not a string`);return(...i)=>e(t,[...r,{method:n,args:i}])}})}(e,[])}function h(e,t){return{send:r=>e.send(t(r))}}function u(e,t){return{addHandler:r=>e.addHandler(function(e,t){return r=>e(t(r))}(r,t))}}function f(e,t,r){return{...h(e,r),...u(e,t)}}function l(e,t,r){return h(function(e,t,r,i){return{send:async n=>{const s=await i(e,{headers:{"Content-Type":t},method:"post",body:n.request});if(s.ok)try{const e=await r(s);n.resolvers.resolve(e)}catch(e){n.resolvers.reject(e)}else n.resolvers.reject(new Error("Invalid response code"))}}}(e,"application/octet-stream",async e=>{const r=t.decode(new Uint8Array(await e.arrayBuffer()));if("failure"===r.tag)throw r.err;return r.value},r),e=>({resolvers:e.resolvers,request:t.encode(e.request)}))}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return e(t={exports:{}},t.exports),t.exports}var w=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.utf8DecodeTD=t.TEXT_DECODER_THRESHOLD=t.utf8DecodeJs=t.utf8EncodeTE=t.TEXT_ENCODER_THRESHOLD=t.utf8EncodeJs=t.utf8Count=t.TEXT_ENCODING_AVAILABLE=void 0,t.TEXT_ENCODING_AVAILABLE="undefined"!=typeof process&&"never"!==process.env.TEXT_ENCODING&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder,t.utf8Count=function(e){const t=e.length;let r=0,i=0;for(;i<t;){let n=e.charCodeAt(i++);if(0!=(4294967168&n))if(0==(4294965248&n))r+=2;else{if(n>=55296&&n<=56319&&i<t){const t=e.charCodeAt(i);56320==(64512&t)&&(++i,n=((1023&n)<<10)+(1023&t)+65536)}r+=0==(4294901760&n)?3:4}else r++}return r},t.utf8EncodeJs=function(e,t,r){const i=e.length;let n=r,s=0;for(;s<i;){let r=e.charCodeAt(s++);if(0!=(4294967168&r)){if(0==(4294965248&r))t[n++]=r>>6&31|192;else{if(r>=55296&&r<=56319&&s<i){const t=e.charCodeAt(s);56320==(64512&t)&&(++s,r=((1023&r)<<10)+(1023&t)+65536)}0==(4294901760&r)?(t[n++]=r>>12&15|224,t[n++]=r>>6&63|128):(t[n++]=r>>18&7|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128)}t[n++]=63&r|128}else t[n++]=r}};const r=t.TEXT_ENCODING_AVAILABLE?new TextEncoder:void 0;t.TEXT_ENCODER_THRESHOLD="undefined"!=typeof process&&"force"!==process.env.TEXT_ENCODING?200:0,t.utf8EncodeTE=(null==r?void 0:r.encodeInto)?function(e,t,i){r.encodeInto(e,t.subarray(i))}:function(e,t,i){t.set(r.encode(e),i)};t.utf8DecodeJs=function(e,t,r){let i=t;const n=i+r,s=[];let o="";for(;i<n;){const t=e[i++];if(0==(128&t))s.push(t);else if(192==(224&t)){const r=63&e[i++];s.push((31&t)<<6|r)}else if(224==(240&t)){const r=63&e[i++],n=63&e[i++];s.push((31&t)<<12|r<<6|n)}else if(240==(248&t)){let r=(7&t)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++];r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r)}else s.push(t);s.length>=4096&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o};const i=t.TEXT_ENCODING_AVAILABLE?new TextDecoder:null;t.TEXT_DECODER_THRESHOLD="undefined"!=typeof process&&"force"!==process.env.TEXT_DECODER?200:0,t.utf8DecodeTD=function(e,t,r){const n=e.subarray(t,t+r);return i.decode(n)}}));p(w);w.utf8DecodeTD,w.TEXT_DECODER_THRESHOLD,w.utf8DecodeJs,w.utf8EncodeTE,w.TEXT_ENCODER_THRESHOLD,w.utf8EncodeJs,w.utf8Count,w.TEXT_ENCODING_AVAILABLE;var g=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtData=void 0;t.ExtData=class{constructor(e,t){this.type=e,this.data=t}}}));p(g);g.ExtData;var m=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getUint64=t.getInt64=t.setInt64=t.setUint64=void 0,t.setUint64=function(e,t,r){const i=r/4294967296,n=r;e.setUint32(t,i),e.setUint32(t+4,n)},t.setInt64=function(e,t,r){const i=Math.floor(r/4294967296),n=r;e.setUint32(t,i),e.setUint32(t+4,n)},t.getInt64=function(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)},t.getUint64=function(e,t){return 4294967296*e.getUint32(t)+e.getUint32(t+4)}}));p(m);m.getUint64,m.getInt64,m.setInt64,m.setUint64;var E=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.timestampExtension=t.decodeTimestampExtension=t.decodeTimestampToTimeSpec=t.encodeTimestampExtension=t.encodeDateToTimeSpec=t.encodeTimeSpecToTimestamp=t.EXT_TIMESTAMP=void 0,t.EXT_TIMESTAMP=-1;function r({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}{const r=e/4294967296,i=4294967295&e,n=new Uint8Array(8),s=new DataView(n.buffer);return s.setUint32(0,t<<2|3&r),s.setUint32(4,i),n}}{const r=new Uint8Array(12),i=new DataView(r.buffer);return i.setUint32(0,t),m.setInt64(i,4,e),r}}function i(e){const t=e.getTime(),r=Math.floor(t/1e3),i=1e6*(t-1e3*r),n=Math.floor(i/1e9);return{sec:r+n,nsec:i-1e9*n}}function n(e){if(e instanceof Date){return r(i(e))}return null}function s(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const e=t.getUint32(0);return{sec:4294967296*(3&e)+t.getUint32(4),nsec:e>>>2}}case 12:return{sec:m.getInt64(t,4),nsec:t.getUint32(0)};default:throw new Error("Unrecognized data size for timestamp: "+e.length)}}function o(e){const t=s(e);return new Date(1e3*t.sec+t.nsec/1e6)}t.encodeTimeSpecToTimestamp=r,t.encodeDateToTimeSpec=i,t.encodeTimestampExtension=n,t.decodeTimestampToTimeSpec=s,t.decodeTimestampExtension=o,t.timestampExtension={type:t.EXT_TIMESTAMP,encode:n,decode:o}}));p(E);E.timestampExtension,E.decodeTimestampExtension,E.decodeTimestampToTimeSpec,E.encodeTimestampExtension,E.encodeDateToTimeSpec,E.encodeTimeSpecToTimestamp,E.EXT_TIMESTAMP;var T=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionCodec=void 0;let r=(()=>{class e{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(E.timestampExtension)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const i=1+e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(null!=i){const n=i(e,t);if(null!=n){const e=-1-r;return new g.ExtData(e,n)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(null!=i){const n=i(e,t);if(null!=n){const e=r;return new g.ExtData(e,n)}}}return e instanceof g.ExtData?e:null}decode(e,t,r){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new g.ExtData(t,e)}}return e.defaultCodec=new e,e})();t.ExtensionCodec=r}));p(T);T.ExtensionCodec;var b=y((function(e,t){function r(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDataView=t.ensureUint8Array=void 0,t.ensureUint8Array=r,t.createDataView=function(e){if(e instanceof ArrayBuffer)return new DataView(e);const t=r(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}}));p(b);b.createDataView,b.ensureUint8Array;var x=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Encoder=t.DEFAULT_INITIAL_BUFFER_SIZE=t.DEFAULT_MAX_DEPTH=void 0,t.DEFAULT_MAX_DEPTH=100,t.DEFAULT_INITIAL_BUFFER_SIZE=2048;t.Encoder=class{constructor(e=T.ExtensionCodec.defaultCodec,r,i=t.DEFAULT_MAX_DEPTH,n=t.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,o=!1,c=!1){this.extensionCodec=e,this.context=r,this.maxDepth=i,this.initialBufferSize=n,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}encode(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)}getUint8Array(){return this.bytes.subarray(0,this.pos)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){!1===e?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error(`Too long string: ${e} bytes in UTF-8`);this.writeU8(219),this.writeU32(e)}}encodeString(e){const t=e.length;if(w.TEXT_ENCODING_AVAILABLE&&t>w.TEXT_ENCODER_THRESHOLD){const t=w.utf8Count(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),w.utf8EncodeTE(e,this.bytes,this.pos),this.pos+=t}else{const t=w.utf8Count(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),w.utf8EncodeJs(e,this.bytes,this.pos),this.pos+=t}}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}const r=b.ensureUint8Array(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large array: "+r);this.writeU8(221),this.writeU32(r)}for(const r of e)this.encode(r,t+1)}countWithoutUndefined(e,t){let r=0;for(const i of t)void 0!==e[i]&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: "+i);this.writeU8(223),this.writeU32(i)}for(const i of r){const r=e[i];this.ignoreUndefined&&void 0===r||(this.encodeString(i),this.encode(r,t+1))}}encodeExtension(e){const t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),m.setUint64(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),m.setInt64(this.view,this.pos,e),this.pos+=8}}}));p(x);x.Encoder,x.DEFAULT_INITIAL_BUFFER_SIZE,x.DEFAULT_MAX_DEPTH;var U=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encode=void 0;const r={};t.encode=function(e,t=r){const i=new x.Encoder(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined);return i.encode(e,1),i.getUint8Array()}}));p(U);U.encode;var S=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.prettyByte=void 0,t.prettyByte=function(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}}));p(S);S.prettyByte;var v=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CachedKeyDecoder=void 0;t.CachedKeyDecoder=class{constructor(e=16,t=16){this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let e=0;e<this.maxKeyLength;e++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}get(e,t,r){const i=this.caches[r-1],n=i.length;e:for(let s=0;s<n;s++){const n=i[s],o=n.bytes;for(let i=0;i<r;i++)if(o[i]!==e[t+i])continue e;return n.value}return null}store(e,t){const r=this.caches[e.length-1],i={bytes:e,value:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,t,r){const i=this.get(e,t,r);if(null!=i)return i;const n=w.utf8DecodeJs(e,t,r),s=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(s,n),n}}}));p(v);v.CachedKeyDecoder;var D=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.DataViewIndexOutOfBoundsError=void 0;const r=e=>{const t=typeof e;return"string"===t||"number"===t},i=new DataView(new ArrayBuffer(0)),n=new Uint8Array(i.buffer);t.DataViewIndexOutOfBoundsError=(()=>{try{i.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();const s=new t.DataViewIndexOutOfBoundsError("Insufficient data"),o=new v.CachedKeyDecoder;t.Decoder=class{constructor(e=T.ExtensionCodec.defaultCodec,t,r=4294967295,s=4294967295,c=4294967295,a=4294967295,d=4294967295,h=o){this.extensionCodec=e,this.context=t,this.maxStrLength=r,this.maxBinLength=s,this.maxArrayLength=c,this.maxMapLength=a,this.maxExtLength=d,this.cachedKeyDecoder=h,this.totalPos=0,this.pos=0,this.view=i,this.bytes=n,this.headByte=-1,this.stack=[]}setBuffer(e){this.bytes=b.ensureUint8Array(e),this.view=b.createDataView(this.bytes),this.pos=0}appendBuffer(e){if(-1!==this.headByte||this.hasRemaining()){const t=this.bytes.subarray(this.pos),r=b.ensureUint8Array(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}else this.setBuffer(e)}hasRemaining(e=1){return this.view.byteLength-this.pos>=e}createNoExtraBytesError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} byte(s) found at buffer[${e}]`)}decodeSingleSync(){const e=this.decodeSync();if(this.hasRemaining())throw this.createNoExtraBytesError(this.pos);return e}async decodeSingleAsync(e){let r,i=!1;for await(const n of e){if(i)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(n);try{r=this.decodeSync(),i=!0}catch(e){if(!(e instanceof t.DataViewIndexOutOfBoundsError))throw e}this.totalPos+=this.pos}if(i){if(this.hasRemaining())throw this.createNoExtraBytesError(this.totalPos);return r}const{headByte:n,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parcing ${S.prettyByte(n)} at ${o} (${s} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let i=r,n=-1;for await(const s of e){if(r&&0===n)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(s),i&&(n=this.readArraySize(),i=!1,this.complete());try{for(;yield this.decodeSync(),0!=--n;);}catch(e){if(!(e instanceof t.DataViewIndexOutOfBoundsError))throw e}this.totalPos+=this.pos}}decodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const r=e-128;if(0!==r){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){const r=e-144;if(0!==r){this.pushArrayState(r),this.complete();continue e}t=[]}else{const r=e-160;t=this.decodeUtf8String(r,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){const e=this.lookU8();t=this.decodeUtf8String(e,1)}else if(218===e){const e=this.lookU16();t=this.decodeUtf8String(e,2)}else if(219===e){const e=this.lookU32();t=this.decodeUtf8String(e,4)}else if(220===e){const e=this.readU16();if(0!==e){this.pushArrayState(e),this.complete();continue e}t=[]}else if(221===e){const e=this.readU32();if(0!==e){this.pushArrayState(e),this.complete();continue e}t=[]}else if(222===e){const e=this.readU16();if(0!==e){this.pushMapState(e),this.complete();continue e}t={}}else if(223===e){const e=this.readU32();if(0!==e){this.pushMapState(e),this.complete();continue e}t={}}else if(196===e){const e=this.lookU8();t=this.decodeBinary(e,1)}else if(197===e){const e=this.lookU16();t=this.decodeBinary(e,2)}else if(198===e){const e=this.lookU32();t=this.decodeBinary(e,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){const e=this.lookU8();t=this.decodeExtension(e,1)}else if(200===e){const e=this.lookU16();t=this.decodeExtension(e,2)}else{if(201!==e)throw new Error("Unrecognized type byte: "+S.prettyByte(e));{const e=this.lookU32();t=this.decodeExtension(e,4)}}this.complete();const i=this.stack;for(;i.length>0;){const e=i[i.length-1];if(0===e.type){if(e.array[e.position]=t,e.position++,e.position!==e.size)continue e;i.pop(),t=e.array}else{if(1===e.type){if(!r(t))throw new Error("The type of key must be string or number but "+typeof t);e.key=t,e.type=2;continue e}if(e.map[e.key]=t,e.readCount++,e.readCount!==e.size){e.key=null,e.type=1;continue e}i.pop(),t=e.map}}return t}}readHeadByte(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new Error("Unrecognized array type byte: "+S.prettyByte(e))}}pushMapState(e){if(e>this.maxMapLength)throw new Error(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new Error(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,t){var r;if(e>this.maxStrLength)throw new Error(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw s;const i=this.pos+t;let n;return n=this.stateIsMapKey()&&(null===(r=this.cachedKeyDecoder)||void 0===r?void 0:r.canBeCached(e))?this.cachedKeyDecoder.decode(this.bytes,i,e):w.TEXT_ENCODING_AVAILABLE&&e>w.TEXT_DECODER_THRESHOLD?w.utf8DecodeTD(this.bytes,i,e):w.utf8DecodeJs(this.bytes,i,e),this.pos+=t+e,n}stateIsMapKey(){if(this.stack.length>0){return 1===this.stack[this.stack.length-1].type}return!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new Error(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw s;const r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i}decodeExtension(e,t){if(e>this.maxExtLength)throw new Error(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=m.getUint64(this.view,this.pos);return this.pos+=8,e}readI64(){const e=m.getInt64(this.view,this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}}));p(D);D.Decoder,D.DataViewIndexOutOfBoundsError;var _=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.defaultDecodeOptions=void 0,t.defaultDecodeOptions={},t.decode=function(e,r=t.defaultDecodeOptions){const i=new D.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength);return i.setBuffer(e),i.decodeSingleSync()}}));p(_);_.decode,_.defaultDecodeOptions;var A=y((function(e,t){function r(e){return null!=e[Symbol.asyncIterator]}function i(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*n(e){const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)return;i(r),yield r}}finally{t.releaseLock()}}Object.defineProperty(t,"__esModule",{value:!0}),t.ensureAsyncIterabe=t.asyncIterableFromStream=t.isAsyncIterable=void 0,t.isAsyncIterable=r,t.asyncIterableFromStream=n,t.ensureAsyncIterabe=function(e){return r(e)?e:n(e)}}));p(A);A.ensureAsyncIterabe,A.asyncIterableFromStream,A.isAsyncIterable;var O=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStream=t.decodeArrayStream=t.decodeAsync=void 0,t.decodeAsync=async function(e,t=_.defaultDecodeOptions){const r=A.ensureAsyncIterabe(e);return new D.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeSingleAsync(r)},t.decodeArrayStream=function(e,t=_.defaultDecodeOptions){const r=A.ensureAsyncIterabe(e);return new D.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(r)},t.decodeStream=function(e,t=_.defaultDecodeOptions){const r=A.ensureAsyncIterabe(e);return new D.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(r)}}));p(O);O.decodeStream,O.decodeArrayStream,O.decodeAsync;var I=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encode",{enumerable:!0,get:function(){return U.encode}}),Object.defineProperty(t,"decode",{enumerable:!0,get:function(){return _.decode}}),Object.defineProperty(t,"decodeAsync",{enumerable:!0,get:function(){return O.decodeAsync}}),Object.defineProperty(t,"decodeArrayStream",{enumerable:!0,get:function(){return O.decodeArrayStream}}),Object.defineProperty(t,"decodeStream",{enumerable:!0,get:function(){return O.decodeStream}}),Object.defineProperty(t,"Decoder",{enumerable:!0,get:function(){return D.Decoder}}),Object.defineProperty(t,"Encoder",{enumerable:!0,get:function(){return x.Encoder}}),Object.defineProperty(t,"ExtensionCodec",{enumerable:!0,get:function(){return T.ExtensionCodec}}),Object.defineProperty(t,"ExtData",{enumerable:!0,get:function(){return g.ExtData}}),Object.defineProperty(t,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return E.EXT_TIMESTAMP}}),Object.defineProperty(t,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return E.encodeDateToTimeSpec}}),Object.defineProperty(t,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return E.encodeTimeSpecToTimestamp}}),Object.defineProperty(t,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return E.decodeTimestampToTimeSpec}}),Object.defineProperty(t,"encodeTimestampExtension",{enumerable:!0,get:function(){return E.encodeTimestampExtension}}),Object.defineProperty(t,"decodeTimestampExtension",{enumerable:!0,get:function(){return E.decodeTimestampExtension}})}));p(I);var L=I.encode,B=I.decode,j=(I.decodeAsync,I.decodeArrayStream,I.decodeStream,I.Decoder,I.Encoder,I.ExtensionCodec);I.ExtData,I.EXT_TIMESTAMP,I.encodeDateToTimeSpec,I.encodeTimeSpecToTimestamp,I.decodeTimestampToTimeSpec,I.encodeTimestampExtension,I.decodeTimestampExtension;const C=Symbol(),M=Symbol();class P{}class N{constructor(e,t){this.classes=e,this.strict=t}static create(e,t=!1){return new N(e||{},t)}addClasses(e){const t=Object.keys(this.classes),r=Object.keys(e);for(const e of t)if(r.includes(e))throw new Error("Duplicate identifier "+e);return new N({...this.classes,...e},this.strict)}registerStrict(e){if(!this.strict)return;const t=[Object.prototype,Error.prototype,P.prototype,...Object.values(this.classes).map(e=>e.prototype)];e.register({type:0,encode:e=>{if("object"==typeof e&&!Array.isArray(e)){if(t.includes(Object.getPrototypeOf(e)))return null;throw new Error("Attempted to encode an object with an unknown prototype")}return null},decode:()=>{throw new Error("Attempted to decode a dummy type")}})}makeCodec(){const e=new j;return this.registerStrict(e),e.register({type:1,encode:e=>e instanceof P?L(null):null,decode:()=>{}}),e.register({type:2,encode:t=>{const r=Object.entries(this.classes);r.reverse();for(const[i,n]of r){if(!(t instanceof n))continue;const r=t;if(void 0!==r[M])return L([i,r[M]()],{extensionCodec:e});const s=Object.entries(r).map(([e,t])=>void 0===t?[e,new P]:[e,t]);return L([i,s],{extensionCodec:e})}return null},decode:t=>{const[r,i]=B(t,{extensionCodec:e}),n=this.classes[r],s=n[C];if(void 0!==s)return s(i);const o=i;return Object.assign(Object.create(n.prototype),Object.fromEntries(o))}}),e.register({type:3,encode:e=>e instanceof Error?L(e.message):null,decode:e=>new Error(B(e))}),e}encode(e){return this.codec||(this.codec=this.makeCodec()),L(e,{extensionCodec:this.codec})}decode(e){return this.codec||(this.codec=this.makeCodec()),B(e,{extensionCodec:this.codec})}}class F{static async of(e){return new F(e,await e.text())}constructor(e,t){this.bufferedText=t,this.ok=e.ok,this.redirected=e.redirected,this.status=e.status,this.statusText=e.statusText,this.type=e.type,this.url=e.url}async json(){return JSON.parse(this.bufferedText)}text(){return Promise.resolve(this.bufferedText)}}const k={"@polypoly-eu/podigree.FetchResponse":F,"@polypoly-eu/rdf.NamedNode":t,"@polypoly-eu/rdf.BlankNode":r,"@polypoly-eu/rdf.Literal":i,"@polypoly-eu/rdf.Variable":n,"@polypoly-eu/rdf.DefaultGraph":s,"@polypoly-eu/rdf.Quad":o},z=N.create(k);class R{static fromFetch(e,t=window.fetch){const r=l(e,z,t);return new R(r,a)}static fromRawPort(e){return new R(function(e){let t=0;const r=new Map;return e.addHandler(e=>{const{resolve:t,reject:i}=r.get(e.id);"error"in e?i(e.error):t(e.response)}),{send:i=>{const n=++t;r.set(n,i.resolvers),e.send({request:i.request,id:n})}}}(function(e){return f(e,e=>z.decode(e),e=>z.encode(e))}(e)),a)}constructor(e,t){var r;this.clientPort=e,this.dataFactory=t,this.rpcClient=d((r=e,e=>new Promise((t,i)=>{r.send({request:e,resolvers:{resolve:t,reject:i}})})))}get polyIn(){return{factory:this.dataFactory,add:(...e)=>this.rpcClient.polyIn().add(...e)(),select:e=>this.rpcClient.polyIn().select(e)()}}get polyOut(){return{readFile:(e,t)=>this.rpcClient.polyOut().readFile(e,t)(),writeFile:(e,t,r)=>this.rpcClient.polyOut().writeFile(e,t,r)(),stat:e=>this.rpcClient.polyOut().stat(e)(),fetch:(e,t)=>this.rpcClient.polyOut().fetch(e,t||{})()}}}const H=new Feature;(async()=>{const e=R.fromRawPort(await(t=function(){if(document.currentScript&&void 0!==document.currentScript.dataset.secret)return document.currentScript.dataset.secret;throw new Error("No secret found; make sure to set the data-secret attribute")}(),new Promise((e,r)=>{const i=n=>{if(n.source===window.parent&&n.data===t){if(1===n.ports.length){n.ports[0].start();const t=(s=n.ports[0],{send(e){s.postMessage(e)},addHandler(e){s.addEventListener("message",t=>e(t))}});e(f(t,e=>e.data,e=>e))}else r("Malformed message");var s;window.removeEventListener("message",i)}};window.addEventListener("message",i)})));var t;await H.init(e)})()}();
