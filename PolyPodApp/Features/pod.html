<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>polyPod</title>
    <link type="text/css" rel="stylesheet" href="../polyLook.css"/>
    <script>
      const {port1, port2} = new MessageChannel();
      function initIframe(el) {
        port1.start();
        port1.onmessage = event => {
          // incoming msgpack-encoded events:
          webkit.messageHandlers.event.postMessage(event.data);
        };
        el.contentWindow.postMessage("", "*", [port2]);

        // outgoing msgpack-encoded events:
        //port1.postMessage(...)
      }
    </script>
  </head>
  <body>
    <div class="featureFrameWrapper">
      <span class="title">Feature: featureName</span>
      <iframe id="harness" onload="initIframe(this);" src="index.html">
    </div>
  </body>
</html>
