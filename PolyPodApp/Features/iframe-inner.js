!function(){"use strict";class e{equals(t){if(!t||t.termType!==this.termType)return!1;for(const[s,i]of Object.entries(this)){const r=t[s];if(i instanceof e){if(!i.equals(r))return!1}else if(r!==i)return!1}return!0}}class t extends e{__init(){this.termType="NamedNode"}constructor(e){super(),this.value=e,t.prototype.__init.call(this),Object.freeze(this)}}class s extends e{static __initStatic(){this.nextId=0}__init2(){this.termType="BlankNode"}constructor(e){super(),s.prototype.__init2.call(this),this.value=e||"b"+ ++s.nextId,Object.freeze(this)}}s.__initStatic();class i extends e{static __initStatic2(){this.langStringDatatype=new t("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString")}static __initStatic3(){this.stringDatatype=new t("http://www.w3.org/2001/XMLSchema#string")}__init3(){this.termType="Literal"}constructor(e,s){super(),this.value=e,i.prototype.__init3.call(this),"string"==typeof s?-1===s.indexOf(":")?(this.language=s,this.datatype=i.langStringDatatype):(this.language="",this.datatype=new t(s)):(this.language="",this.datatype=s||i.stringDatatype),Object.freeze(this)}}i.__initStatic2(),i.__initStatic3();class r extends e{__init4(){this.termType="Variable"}constructor(e){super(),this.value=e,r.prototype.__init4.call(this),Object.freeze(this)}}class n extends e{static __initStatic4(){this.instance=new n}constructor(){super(),n.prototype.__init5.call(this),n.prototype.__init6.call(this),Object.freeze(this)}__init5(){this.termType="DefaultGraph"}__init6(){this.value=""}}n.__initStatic4();class o{constructor(e,t,s,i){this.subject=e,this.predicate=t,this.object=s,this.graph=i,Object.freeze(this)}equals(e){return!!e&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}const c={subject:[t.prototype,s.prototype,r.prototype],predicate:[t.prototype,r.prototype],object:[t.prototype,i.prototype,s.prototype,r.prototype],graph:[n.prototype,t.prototype,s.prototype,r.prototype]};const a=new class{constructor(e){this.strict=e,Object.freeze(this)}blankNode(e){if(this.strict&&void 0!==e&&"string"!=typeof e)throw new Error("Expected string or undefined");return new s(e)}defaultGraph(){return n.instance}literal(e,s){if(this.strict){if("string"!=typeof e)throw new Error("Expected string as value");if(void 0!==s&&"string"!=typeof s&&Object.getPrototypeOf(s)!==t.prototype)throw new Error("Expected undefined, string or NamedNode prototype as language/datatype")}return new i(e,s)}namedNode(e){if(this.strict&&"string"!=typeof e)throw new Error("Expected string");return new t(e)}quad(e,t,s,i){if(this.strict){if(!c.subject.includes(Object.getPrototypeOf(e)))throw new Error("Invalid prototype of subject");if(!c.predicate.includes(Object.getPrototypeOf(t)))throw new Error("Invalid prototype of predicate");if(!c.object.includes(Object.getPrototypeOf(s)))throw new Error("Invalid prototype of object");if(void 0!==i&&!c.graph.includes(Object.getPrototypeOf(i)))throw new Error("Invalid prototype of graph")}return new o(e,t,s,i||this.defaultGraph())}variable(e){if(this.strict&&"string"!=typeof e)throw new Error("Expected string");return new r(e)}}(!1);function h(e){return function e(t,s){return new Proxy(new Function,{apply(e,i,r){if(!Array.isArray(r)||0!==r.length)throw new Error("Argument list must be empty");return t(s)},get(i,r){if("string"!=typeof r)throw new Error(`Property ${String(r)} is not a string`);return(...i)=>e(t,[...s,{method:r,args:i}])}})}(e,[])}function d(e,t){return{send:s=>e.send(t(s))}}function u(e,t){return{addHandler:s=>e.addHandler(function(e,t){return s=>e(t(s))}(s,t))}}function f(e,t,s){return{...d(e,s),...u(e,t)}}function l(e,t,s){return d(function(e,t,s,i){return{send:async r=>{const n=await i(e,{headers:{"Content-Type":t},method:"post",body:r.request});if(n.ok)try{const e=await s(n);r.resolvers.resolve(e)}catch(e){r.resolvers.reject(e)}else r.resolvers.reject(new Error("Invalid response code"))}}}(e,"application/octet-stream",async e=>{const s=t.decode(new Uint8Array(await e.arrayBuffer()));if("failure"===s.tag)throw s.err;return s.value},s),e=>({resolvers:e.resolvers,request:t.encode(e.request)}))}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return e(t={exports:{}},t.exports),t.exports}var w=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_ENCODING_AVAILABLE="undefined"!=typeof process&&"never"!==process.env.TEXT_ENCODING&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder,t.utf8Count=function(e){const t=e.length;let s=0,i=0;for(;i<t;){let r=e.charCodeAt(i++);if(0!=(4294967168&r))if(0==(4294965248&r))s+=2;else{if(r>=55296&&r<=56319&&i<t){const t=e.charCodeAt(i);56320==(64512&t)&&(++i,r=((1023&r)<<10)+(1023&t)+65536)}s+=0==(4294901760&r)?3:4}else s++}return s},t.utf8EncodeJs=function(e,t,s){const i=e.length;let r=s,n=0;for(;n<i;){let s=e.charCodeAt(n++);if(0!=(4294967168&s)){if(0==(4294965248&s))t[r++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&n<i){const t=e.charCodeAt(n);56320==(64512&t)&&(++n,s=((1023&s)<<10)+(1023&t)+65536)}0==(4294901760&s)?(t[r++]=s>>12&15|224,t[r++]=s>>6&63|128):(t[r++]=s>>18&7|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128)}t[r++]=63&s|128}else t[r++]=s}};const s=t.TEXT_ENCODING_AVAILABLE?new TextEncoder:void 0;t.TEXT_ENCODER_THRESHOLD="undefined"!=typeof process&&"force"!==process.env.TEXT_ENCODING?200:0,t.utf8EncodeTE=(null==s?void 0:s.encodeInto)?function(e,t,i){s.encodeInto(e,t.subarray(i))}:function(e,t,i){t.set(s.encode(e),i)};t.utf8DecodeJs=function(e,t,s){let i=t;const r=i+s,n=[];let o="";for(;i<r;){const t=e[i++];if(0==(128&t))n.push(t);else if(192==(224&t)){const s=63&e[i++];n.push((31&t)<<6|s)}else if(224==(240&t)){const s=63&e[i++],r=63&e[i++];n.push((31&t)<<12|s<<6|r)}else if(240==(248&t)){let s=(7&t)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++];s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s)}else n.push(t);n.length>=4096&&(o+=String.fromCharCode(...n),n.length=0)}return n.length>0&&(o+=String.fromCharCode(...n)),o};const i=t.TEXT_ENCODING_AVAILABLE?new TextDecoder:null;t.TEXT_DECODER_THRESHOLD="undefined"!=typeof process&&"force"!==process.env.TEXT_DECODER?200:0,t.utf8DecodeTD=function(e,t,s){const r=e.subarray(t,t+s);return i.decode(r)}}));p(w);w.TEXT_ENCODING_AVAILABLE,w.utf8Count,w.utf8EncodeJs,w.TEXT_ENCODER_THRESHOLD,w.utf8EncodeTE,w.utf8DecodeJs,w.TEXT_DECODER_THRESHOLD,w.utf8DecodeTD;var g=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.ExtData=class{constructor(e,t){this.type=e,this.data=t}}}));p(g);g.ExtData;var E=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setUint64=function(e,t,s){const i=s/4294967296,r=s;e.setUint32(t,i),e.setUint32(t+4,r)},t.setInt64=function(e,t,s){const i=Math.floor(s/4294967296),r=s;e.setUint32(t,i),e.setUint32(t+4,r)},t.getInt64=function(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)},t.getUint64=function(e,t){return 4294967296*e.getUint32(t)+e.getUint32(t+4)}}));p(E);E.setUint64,E.setInt64,E.getInt64,E.getUint64;var m=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXT_TIMESTAMP=-1;function s({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}{const s=e/4294967296,i=4294967295&e,r=new Uint8Array(8),n=new DataView(r.buffer);return n.setUint32(0,t<<2|3&s),n.setUint32(4,i),r}}{const s=new Uint8Array(12),i=new DataView(s.buffer);return i.setUint32(0,t),E.setInt64(i,4,e),s}}function i(e){const t=e.getTime(),s=Math.floor(t/1e3),i=1e6*(t-1e3*s),r=Math.floor(i/1e9);return{sec:s+r,nsec:i-1e9*r}}function r(e){if(e instanceof Date){return s(i(e))}return null}function n(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const e=t.getUint32(0);return{sec:4294967296*(3&e)+t.getUint32(4),nsec:e>>>2}}case 12:return{sec:E.getInt64(t,4),nsec:t.getUint32(0)};default:throw new Error("Unrecognized data size for timestamp: "+e.length)}}function o(e){const t=n(e);return new Date(1e3*t.sec+t.nsec/1e6)}t.encodeTimeSpecToTimestamp=s,t.encodeDateToTimeSpec=i,t.encodeTimestampExtension=r,t.decodeTimestampToTimeSpec=n,t.decodeTimestampExtension=o,t.timestampExtension={type:t.EXT_TIMESTAMP,encode:r,decode:o}}));p(m);m.EXT_TIMESTAMP,m.encodeTimeSpecToTimestamp,m.encodeDateToTimeSpec,m.encodeTimestampExtension,m.decodeTimestampToTimeSpec,m.decodeTimestampExtension,m.timestampExtension;var x=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(m.timestampExtension)}register({type:e,encode:t,decode:s}){if(e>=0)this.encoders[e]=t,this.decoders[e]=s;else{const i=1+e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=s}}tryToEncode(e,t){for(let s=0;s<this.builtInEncoders.length;s++){const i=this.builtInEncoders[s];if(null!=i){const r=i(e,t);if(null!=r){const e=-1-s;return new g.ExtData(e,r)}}}for(let s=0;s<this.encoders.length;s++){const i=this.encoders[s];if(null!=i){const r=i(e,t);if(null!=r){const e=s;return new g.ExtData(e,r)}}}return e instanceof g.ExtData?e:null}decode(e,t,s){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,s):new g.ExtData(t,e)}}t.ExtensionCodec=s,s.defaultCodec=new s}));p(x);x.ExtensionCodec;var T=y((function(e,t){function s(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ensureUint8Array=s,t.createDataView=function(e){if(e instanceof ArrayBuffer)return new DataView(e);const t=s(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}}));p(T);T.ensureUint8Array,T.createDataView;var U=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_DEPTH=100,t.DEFAULT_INITIAL_BUFFER_SIZE=2048;t.Encoder=class{constructor(e=x.ExtensionCodec.defaultCodec,s,i=t.DEFAULT_MAX_DEPTH,r=t.DEFAULT_INITIAL_BUFFER_SIZE,n=!1,o=!1,c=!1){this.extensionCodec=e,this.context=s,this.maxDepth=i,this.initialBufferSize=r,this.sortKeys=n,this.forceFloat32=o,this.ignoreUndefined=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}encode(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)}getUint8Array(){return this.bytes.subarray(0,this.pos)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}resizeBuffer(e){const t=new ArrayBuffer(e),s=new Uint8Array(t),i=new DataView(t);s.set(this.bytes),this.view=i,this.bytes=s}encodeNil(){this.writeU8(192)}encodeBoolean(e){!1===e?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error(`Too long string: ${e} bytes in UTF-8`);this.writeU8(219),this.writeU32(e)}}encodeString(e){const t=e.length;if(w.TEXT_ENCODING_AVAILABLE&&t>w.TEXT_ENCODER_THRESHOLD){const t=w.utf8Count(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),w.utf8EncodeTE(e,this.bytes,this.pos),this.pos+=t}else{const t=w.utf8Count(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),w.utf8EncodeJs(e,this.bytes,this.pos),this.pos+=t}}encodeObject(e,t){const s=this.extensionCodec.tryToEncode(e,this.context);if(null!=s)this.encodeExtension(s);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}const s=T.ensureUint8Array(e);this.writeU8a(s)}encodeArray(e,t){const s=e.length;if(s<16)this.writeU8(144+s);else if(s<65536)this.writeU8(220),this.writeU16(s);else{if(!(s<4294967296))throw new Error("Too large array: "+s);this.writeU8(221),this.writeU32(s)}for(const s of e)this.encode(s,t+1)}countWithoutUndefined(e,t){let s=0;for(const i of t)void 0!==e[i]&&s++;return s}encodeMap(e,t){const s=Object.keys(e);this.sortKeys&&s.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,s):s.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: "+i);this.writeU8(223),this.writeU32(i)}for(const i of s){const s=e[i];this.ignoreUndefined&&void 0===s||(this.encodeString(i),this.encode(s,t+1))}}encodeExtension(e){const t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),E.setUint64(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),E.setInt64(this.view,this.pos,e),this.pos+=8}}}));p(U);U.DEFAULT_MAX_DEPTH,U.DEFAULT_INITIAL_BUFFER_SIZE,U.Encoder;var b=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const s={};t.encode=function(e,t=s){const i=new U.Encoder(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined);return i.encode(e,1),i.getUint8Array()}}));p(b);b.encode;var S=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.prettyByte=function(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}}));p(S);S.prettyByte;var _=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.CachedKeyDecoder=class{constructor(e=16,t=16){this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let e=0;e<this.maxKeyLength;e++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}get(e,t,s){const i=this.caches[s-1],r=i.length;e:for(let n=0;n<r;n++){const r=i[n],o=r.bytes;for(let i=0;i<s;i++)if(o[i]!==e[t+i])continue e;return r.value}return null}store(e,t){const s=this.caches[e.length-1],i={bytes:e,value:t};s.length>=this.maxLengthPerKey?s[Math.random()*s.length|0]=i:s.push(i)}decode(e,t,s){const i=this.get(e,t,s);if(null!=i)return i;const r=w.utf8DecodeJs(e,t,s),n=Uint8Array.prototype.slice.call(e,t,t+s);return this.store(n,r),r}}}));p(_);_.CachedKeyDecoder;var v=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const s=e=>{const t=typeof e;return"string"===t||"number"===t},i=new DataView(new ArrayBuffer(0)),r=new Uint8Array(i.buffer);t.DataViewIndexOutOfBoundsError=(()=>{try{i.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();const n=new t.DataViewIndexOutOfBoundsError("Insufficient data"),o=new _.CachedKeyDecoder;t.Decoder=class{constructor(e=x.ExtensionCodec.defaultCodec,t,s=4294967295,n=4294967295,c=4294967295,a=4294967295,h=4294967295,d=o){this.extensionCodec=e,this.context=t,this.maxStrLength=s,this.maxBinLength=n,this.maxArrayLength=c,this.maxMapLength=a,this.maxExtLength=h,this.cachedKeyDecoder=d,this.totalPos=0,this.pos=0,this.view=i,this.bytes=r,this.headByte=-1,this.stack=[]}setBuffer(e){this.bytes=T.ensureUint8Array(e),this.view=T.createDataView(this.bytes),this.pos=0}appendBuffer(e){if(-1!==this.headByte||this.hasRemaining()){const t=this.bytes.subarray(this.pos),s=T.ensureUint8Array(e),i=new Uint8Array(t.length+s.length);i.set(t),i.set(s,t.length),this.setBuffer(i)}else this.setBuffer(e)}hasRemaining(e=1){return this.view.byteLength-this.pos>=e}createNoExtraBytesError(e){const{view:t,pos:s}=this;return new RangeError(`Extra ${t.byteLength-s} byte(s) found at buffer[${e}]`)}decodeSingleSync(){const e=this.decodeSync();if(this.hasRemaining())throw this.createNoExtraBytesError(this.pos);return e}async decodeSingleAsync(e){let s,i=!1;for await(const r of e){if(i)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(r);try{s=this.decodeSync(),i=!0}catch(e){if(!(e instanceof t.DataViewIndexOutOfBoundsError))throw e}this.totalPos+=this.pos}if(i){if(this.hasRemaining())throw this.createNoExtraBytesError(this.totalPos);return s}const{headByte:r,pos:n,totalPos:o}=this;throw new RangeError(`Insufficient data in parcing ${S.prettyByte(r)} at ${o} (${n} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,s){let i=s,r=-1;for await(const n of e){if(s&&0===r)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(n),i&&(r=this.readArraySize(),i=!1,this.complete());try{for(;yield this.decodeSync(),0!=--r;);}catch(e){if(!(e instanceof t.DataViewIndexOutOfBoundsError))throw e}this.totalPos+=this.pos}}decodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const s=e-128;if(0!==s){this.pushMapState(s),this.complete();continue e}t={}}else if(e<160){const s=e-144;if(0!==s){this.pushArrayState(s),this.complete();continue e}t=[]}else{const s=e-160;t=this.decodeUtf8String(s,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){const e=this.lookU8();t=this.decodeUtf8String(e,1)}else if(218===e){const e=this.lookU16();t=this.decodeUtf8String(e,2)}else if(219===e){const e=this.lookU32();t=this.decodeUtf8String(e,4)}else if(220===e){const e=this.readU16();if(0!==e){this.pushArrayState(e),this.complete();continue e}t=[]}else if(221===e){const e=this.readU32();if(0!==e){this.pushArrayState(e),this.complete();continue e}t=[]}else if(222===e){const e=this.readU16();if(0!==e){this.pushMapState(e),this.complete();continue e}t={}}else if(223===e){const e=this.readU32();if(0!==e){this.pushMapState(e),this.complete();continue e}t={}}else if(196===e){const e=this.lookU8();t=this.decodeBinary(e,1)}else if(197===e){const e=this.lookU16();t=this.decodeBinary(e,2)}else if(198===e){const e=this.lookU32();t=this.decodeBinary(e,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){const e=this.lookU8();t=this.decodeExtension(e,1)}else if(200===e){const e=this.lookU16();t=this.decodeExtension(e,2)}else{if(201!==e)throw new Error("Unrecognized type byte: "+S.prettyByte(e));{const e=this.lookU32();t=this.decodeExtension(e,4)}}this.complete();const i=this.stack;for(;i.length>0;){const e=i[i.length-1];if(0===e.type){if(e.array[e.position]=t,e.position++,e.position!==e.size)continue e;i.pop(),t=e.array}else{if(1===e.type){if(!s(t))throw new Error("The type of key must be string or number but "+typeof t);e.key=t,e.type=2;continue e}if(e.map[e.key]=t,e.readCount++,e.readCount!==e.size){e.key=null,e.type=1;continue e}i.pop(),t=e.map}}return t}}readHeadByte(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new Error("Unrecognized array type byte: "+S.prettyByte(e))}}pushMapState(e){if(e>this.maxMapLength)throw new Error(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new Error(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,t){var s;if(e>this.maxStrLength)throw new Error(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw n;const i=this.pos+t;let r;return r=this.stateIsMapKey()&&(null===(s=this.cachedKeyDecoder)||void 0===s?void 0:s.canBeCached(e))?this.cachedKeyDecoder.decode(this.bytes,i,e):w.TEXT_ENCODING_AVAILABLE&&e>w.TEXT_DECODER_THRESHOLD?w.utf8DecodeTD(this.bytes,i,e):w.utf8DecodeJs(this.bytes,i,e),this.pos+=t+e,r}stateIsMapKey(){if(this.stack.length>0){return 1===this.stack[this.stack.length-1].type}return!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new Error(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw n;const s=this.pos+t,i=this.bytes.subarray(s,s+e);return this.pos+=t+e,i}decodeExtension(e,t){if(e>this.maxExtLength)throw new Error(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=E.getUint64(this.view,this.pos);return this.pos+=8,e}readI64(){const e=E.getInt64(this.view,this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}}));p(v);v.DataViewIndexOutOfBoundsError,v.Decoder;var A=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultDecodeOptions={},t.decode=function(e,s=t.defaultDecodeOptions){const i=new v.Decoder(s.extensionCodec,s.context,s.maxStrLength,s.maxBinLength,s.maxArrayLength,s.maxMapLength,s.maxExtLength);return i.setBuffer(e),i.decodeSingleSync()}}));p(A);A.defaultDecodeOptions,A.decode;var D=y((function(e,t){function s(e){return null!=e[Symbol.asyncIterator]}function i(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*r(e){const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)return;i(s),yield s}}finally{t.releaseLock()}}Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=s,t.asyncIterableFromStream=r,t.ensureAsyncIterabe=function(e){return s(e)?e:r(e)}}));p(D);D.isAsyncIterable,D.asyncIterableFromStream,D.ensureAsyncIterabe;var I=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeAsync=async function(e,t=A.defaultDecodeOptions){const s=D.ensureAsyncIterabe(e);return new v.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeSingleAsync(s)},t.decodeArrayStream=function(e,t=A.defaultDecodeOptions){const s=D.ensureAsyncIterabe(e);return new v.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(s)},t.decodeStream=function(e,t=A.defaultDecodeOptions){const s=D.ensureAsyncIterabe(e);return new v.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(s)}}));p(I);I.decodeAsync,I.decodeArrayStream,I.decodeStream;var O=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encode=b.encode,t.decode=A.decode,t.decodeAsync=I.decodeAsync,t.decodeArrayStream=I.decodeArrayStream,t.decodeStream=I.decodeStream,t.Decoder=v.Decoder,t.Encoder=U.Encoder,t.ExtensionCodec=x.ExtensionCodec,t.ExtData=g.ExtData,t.EXT_TIMESTAMP=m.EXT_TIMESTAMP,t.encodeDateToTimeSpec=m.encodeDateToTimeSpec,t.encodeTimeSpecToTimestamp=m.encodeTimeSpecToTimestamp,t.decodeTimestampToTimeSpec=m.decodeTimestampToTimeSpec,t.encodeTimestampExtension=m.encodeTimestampExtension,t.decodeTimestampExtension=m.decodeTimestampExtension}));p(O);var B=O.encode,L=O.decode,C=(O.decodeAsync,O.decodeArrayStream,O.decodeStream,O.Decoder,O.Encoder,O.ExtensionCodec);O.ExtData,O.EXT_TIMESTAMP,O.encodeDateToTimeSpec,O.encodeTimeSpecToTimestamp,O.decodeTimestampToTimeSpec,O.encodeTimestampExtension,O.decodeTimestampExtension;const j=Symbol(),M=Symbol();class P{}class N{constructor(e,t){this.classes=e,this.strict=t}static create(e,t=!1){return new N(e||{},t)}addClasses(e){const t=Object.keys(this.classes),s=Object.keys(e);for(const e of t)if(s.includes(e))throw new Error("Duplicate identifier "+e);return new N({...this.classes,...e},this.strict)}registerStrict(e){if(!this.strict)return;const t=[Object.prototype,Error.prototype,P.prototype,...Object.values(this.classes).map(e=>e.prototype)];e.register({type:0,encode:e=>{if("object"==typeof e&&!Array.isArray(e)){if(t.includes(Object.getPrototypeOf(e)))return null;throw new Error("Attempted to encode an object with an unknown prototype")}return null},decode:()=>{throw new Error("Attempted to decode a dummy type")}})}makeCodec(){const e=new C;return this.registerStrict(e),e.register({type:1,encode:e=>e instanceof P?B(null):null,decode:()=>{}}),e.register({type:2,encode:t=>{const s=Object.entries(this.classes);s.reverse();for(const[i,r]of s){if(!(t instanceof r))continue;const s=t;if(void 0!==s[M])return B([i,s[M]()],{extensionCodec:e});const n=Object.entries(s).map(([e,t])=>void 0===t?[e,new P]:[e,t]);return B([i,n],{extensionCodec:e})}return null},decode:t=>{const[s,i]=L(t,{extensionCodec:e}),r=this.classes[s],n=r[j];if(void 0!==n)return n(i);const o=i;return Object.assign(Object.create(r.prototype),Object.fromEntries(o))}}),e.register({type:3,encode:e=>e instanceof Error?B(e.message):null,decode:e=>new Error(L(e))}),e}encode(e){return this.codec||(this.codec=this.makeCodec()),B(e,{extensionCodec:this.codec})}decode(e){return this.codec||(this.codec=this.makeCodec()),L(e,{extensionCodec:this.codec})}}class F{static async of(e){return new F(e,await e.text())}constructor(e,t){this.bufferedText=t,this.ok=e.ok,this.redirected=e.redirected,this.status=e.status,this.statusText=e.statusText,this.type=e.type,this.url=e.url}async json(){return JSON.parse(this.bufferedText)}text(){return Promise.resolve(this.bufferedText)}}const k={"@polypoly-eu/podigree.FetchResponse":F,"@polypoly-eu/rdf.NamedNode":t,"@polypoly-eu/rdf.BlankNode":s,"@polypoly-eu/rdf.Literal":i,"@polypoly-eu/rdf.Variable":r,"@polypoly-eu/rdf.DefaultGraph":n,"@polypoly-eu/rdf.Quad":o},z=N.create(k);class R{static fromFetch(e,t=window.fetch){const s=l(e,z,t);return new R(s,a)}static fromRawPort(e){return new R(function(e){let t=0;const s=new Map;return e.addHandler(e=>{const{resolve:t,reject:i}=s.get(e.id);"error"in e?i(e.error):t(e.response)}),{send:i=>{const r=++t;s.set(r,i.resolvers),e.send({request:i.request,id:r})}}}(function(e){return f(e,e=>z.decode(e),e=>z.encode(e))}(e)),a)}constructor(e,t){var s;this.clientPort=e,this.dataFactory=t,this.rpcClient=h((s=e,e=>new Promise((t,i)=>{s.send({request:e,resolvers:{resolve:t,reject:i}})})))}get polyIn(){return{factory:this.dataFactory,add:(...e)=>this.rpcClient.polyIn().add(...e)(),select:e=>this.rpcClient.polyIn().select(e)()}}get polyOut(){return{readFile:(e,t)=>this.rpcClient.polyOut().readFile(e,t)(),writeFile:(e,t,s)=>this.rpcClient.polyOut().writeFile(e,t,s)(),stat:e=>this.rpcClient.polyOut().stat(e)(),fetch:(e,t)=>this.rpcClient.polyOut().fetch(e,t||{})()}}}const V=new Feature;(async()=>{const e=R.fromRawPort(await(t=function(){if(document.currentScript&&void 0!==document.currentScript.dataset.secret)return document.currentScript.dataset.secret;throw new Error("No secret found; make sure to set the data-secret attribute")}(),new Promise((e,s)=>{const i=r=>{if(r.source===window.parent&&r.data===t){if(1===r.ports.length){r.ports[0].start();const t=(n=r.ports[0],{send(e){n.postMessage(e)},addHandler(e){n.addEventListener("message",t=>e(t))}});e(f(t,e=>e.data,e=>e))}else s("Malformed message");var n;window.removeEventListener("message",i)}};window.addEventListener("message",i)})));var t;await V.init(e)})()}();
